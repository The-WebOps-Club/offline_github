<!DOCTYPE html>

<html lang="en">
<head>

	<script type="text/javascript" src="js/jquery-1.11.1.min.js"></script>
	<link rel="stylesheet" type="text/css" href="css/bootstrap.css">
	<script type="text/javascript" src="js/bootstrap.min.js"></script>
	<script type="text/javascript" src="github/lib/underscore-min.js"></script>	
	<script type="text/javascript" src="github/lib/base64.js"></script>
	<script type="text/javascript" src="github/github.js"></script>
        <script type="text/javascript" src="localforage.js"></script>
<script>
function demofunction(){
}
function userrepo()
{
var x= document.getElementById("username").value;

var y= document.getElementById("password").value;
if((x=="null")||(y=="null")||(x=="")||(y==""))
{alert("form incomplete");}
else{   
var github = new Github({
    username: x ,
    password: y ,
       auth: 'basic'
    });

var user = github.getUser();
user.repos(function(err, repos){
var obj= console.log(repos);
if(repos=undefined){document.getElementById("retry-login").innerHTML="Incorrect username or password.Retry";
document.getElementById("retry-login").href="http://localhost:8000";
}
 else{
localforage.setItem("user",[x,y],function(value){console.log(value[0]);});
localforage.getItem("user").then(function(value){
document.getElementById('showinguserdetails').innerHTML="Welcome"+" " +value[0];});var a=[];
div.image{
	content:url(repos[0].owner.avatar_url);
	}
for(i=0;i<Object.size(repos);i++){
   localforage.setItem("repositories"+String(i),repos[i]);
 localforage.getItem("repositories"+String(i)).then(function(value){a=a+[value.name];document.getElementById("printname").innerHTML=a+" "+"</br>";});
console.log(repos);}
}
});
user.orgs(function(err,orgs){

   
});
user.gists(function(err,gists){
 

});

}}
</script>
</head>
<body>



</br>
<a id="retry-login"></a>
<div id="showinguserdetails">
<div>
<label class="userdetails" for="username">Username</label>

<input id="username" name="userLogin" type="text" placeholder="username"  required="">
   </br>
</div>
<div>
<label class="userdetails" for="password">Password</label>
<input id="password" name="Userpassword" type="password" placeholder="password" required="">
</br>
</div> 
<button class="btn btn-primary" onClick="userrepo()">Log in</button>

</div>
<div class="image"></div>
<div id="printname"></div>
	
</body>
</html>
